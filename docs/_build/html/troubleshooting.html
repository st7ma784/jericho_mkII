

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Troubleshooting &mdash; Jericho Mk II 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=51b770b3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Citation and Contributing" href="citation.html" />
    <link rel="prev" title="Performance Tuning" href="performance_tuning.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Jericho Mk II
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#hardware-requirements">Hardware Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#software-requirements">Software Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-1-install-cuda-toolkit">Step 1: Install CUDA Toolkit</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-2-install-mpi-for-multi-gpu">Step 2: Install MPI (for Multi-GPU)</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-3-clone-and-build-jericho-mk-ii">Step 3: Clone and Build Jericho Mk II</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#running-your-first-simulation">Running Your First Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#single-gpu-example">Single GPU Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#multi-gpu-example">Multi-GPU Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#understanding-the-configuration-file">Understanding the Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#visualizing-results">Visualizing Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#basic-visualization-with-python">Basic Visualization with Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#quick-reference-common-commands">Quick Reference: Common Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#gpu-not-detected">GPU Not Detected</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#mpi-errors">MPI Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#out-of-memory">Out of Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#performance-issues">Performance Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#getting-help">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#configuration-file-structure">Configuration File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#simulation-section">Simulation Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#domain-section">Domain Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#mpi-section">MPI Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#cuda-section">CUDA Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#particles-section">Particles Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#fields-section">Fields Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#boundaries-section">Boundaries Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#physics-section">Physics Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#output-section">Output Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#diagnostics-section">Diagnostics Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#complete-example">Complete Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#validation-and-testing">Validation and Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="running_simulations.html">Running Simulations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#basic-usage">Basic Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#single-gpu-simulation">Single GPU Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#command-line-options">Command Line Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#multi-gpu-simulations">Multi-GPU Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#mpi-basics">MPI Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#gpu-assignment">GPU Assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#multi-node-simulations">Multi-Node Simulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#output-files">Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#file-structure">File Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#field-output-files">Field Output Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#particle-output-files">Particle Output Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#diagnostics-csv">Diagnostics CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#checkpoints">Checkpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#visualization">Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#quick-plots-with-python">Quick Plots with Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#paraview-visualization">ParaView Visualization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#monitoring-and-diagnostics">Monitoring and Diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#real-time-monitoring">Real-Time Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#check-energy-conservation">Check Energy Conservation</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#performance-monitoring">Performance Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#common-simulation-scenarios">Common Simulation Scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#magnetic-reconnection">Magnetic Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#kelvin-helmholtz-instability">Kelvin-Helmholtz Instability</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#solar-wind-interaction">Solar Wind Interaction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#simulation-crashes">Simulation Crashes</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_simulations.html#unexpected-results">Unexpected Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="running_simulations.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output_formats.html">Output Formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#field-output-files">Field Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#file-naming-convention">File Naming Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#hdf5-structure">HDF5 Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#field-datasets">Field Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#reading-field-files-in-python">Reading Field Files in Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#particle-output-files">Particle Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#id1">File Naming Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#id2">HDF5 Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#particle-datasets">Particle Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#reading-particle-files-in-python">Reading Particle Files in Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#diagnostics-csv-file">Diagnostics CSV File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#file-structure">File Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#columns">Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#reading-diagnostics-in-python">Reading Diagnostics in Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#checkpoint-files">Checkpoint Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#id3">File Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#restarting-from-checkpoint">Restarting from Checkpoint</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#data-analysis-examples">Data Analysis Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#compute-derived-quantities">Compute Derived Quantities</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#time-series-analysis">Time Series Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#spatial-analysis">Spatial Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#exporting-to-other-formats">Exporting to Other Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#convert-to-vtk-paraview">Convert to VTK (ParaView)</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_formats.html#convert-to-netcdf">Convert to NetCDF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_formats.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture and Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#hybrid-pic-mhd-physics">Hybrid PIC-MHD Physics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#governing-equations">Governing Equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#why-hybrid">Why Hybrid?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#numerical-methods">Numerical Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#particle-in-cell-algorithm">Particle-in-Cell Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#boris-particle-pusher">Boris Particle Pusher</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#current-advance-method-cam">Current Advance Method (CAM)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#gpu-architecture">GPU Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#structure-of-arrays-soa">Structure of Arrays (SoA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#cuda-kernel-design">CUDA Kernel Design</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#mpi-cuda-hybrid-parallelism">MPI+CUDA Hybrid Parallelism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#domain-decomposition">Domain Decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#ghost-cell-exchange">Ghost Cell Exchange</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#particle-migration">Particle Migration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#memory-management">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#gpu-memory-hierarchy">GPU Memory Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#memory-allocation-strategy">Memory Allocation Strategy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#code-organization">Code Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#module-structure">Module Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#build-system">Build System</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#testing-strategy">Testing Strategy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#integration-tests">Integration Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#performance-benchmarks">Performance Benchmarks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#key-performance-metrics">Key Performance Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cuda_kernels.html">CUDA Kernels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#kernel-design-principles">Kernel Design Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#particle-kernels">Particle Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#particle-push-kernel">Particle Push Kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#bilinear-interpolation">Bilinear Interpolation</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#boris-rotation">Boris Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#particle-to-grid-kernels">Particle-to-Grid Kernels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#field-solver-kernels">Field Solver Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#ohm-s-law-kernel">Ohm’s Law Kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#faraday-s-law-kernel">Faraday’s Law Kernel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#boundary-condition-kernels">Boundary Condition Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#periodic-boundaries">Periodic Boundaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#reflecting-boundaries">Reflecting Boundaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#outflow-boundaries">Outflow Boundaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#diagnostic-kernels">Diagnostic Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#kinetic-energy-kernel">Kinetic Energy Kernel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#performance-optimization">Performance Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#memory-access-patterns">Memory Access Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#shared-memory-usage">Shared Memory Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#occupancy-tuning">Occupancy Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#kernel-fusion">Kernel Fusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#profiling-and-debugging">Profiling and Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#using-nvprof">Using nvprof</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#using-nsight-compute">Using Nsight Compute</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda_kernels.html#cuda-memcheck">CUDA-MEMCHECK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cuda_kernels.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mpi_parallelism.html">MPI Parallelism</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#why-mpi">Why MPI?</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#domain-decomposition">Domain Decomposition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#cartesian-grid-partitioning">Cartesian Grid Partitioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#neighbor-identification">Neighbor Identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#ghost-cells">Ghost Cells</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#communication-patterns">Communication Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#ghost-cell-exchange">Ghost Cell Exchange</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#cuda-aware-mpi">CUDA-Aware MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#particle-migration">Particle Migration</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#collective-operations">Collective Operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#load-balancing">Load Balancing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#static-load-balancing">Static Load Balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#dynamic-load-balancing-experimental">Dynamic Load Balancing (Experimental)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#performance-optimization">Performance Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#overlap-communication-and-computation">Overlap Communication and Computation</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#cuda-aware-mpi-with-gpudirect-rdma">CUDA-Aware MPI with GPUDirect RDMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#minimize-ghost-cell-width">Minimize Ghost Cell Width</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#scaling-studies">Scaling Studies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#weak-scaling">Weak Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#strong-scaling">Strong Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#scaling-limits">Scaling Limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#debugging-mpi-programs">Debugging MPI Programs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#common-issues">Common Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#debugging-tools">Debugging Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpi_parallelism.html#testing-mpi">Testing MPI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#configuration-example">Configuration Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi_parallelism.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/particle_buffer.html">API Reference: ParticleBuffer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#class-jericho-particlebuffer">Class: <code class="docutils literal notranslate"><span class="pre">jericho::ParticleBuffer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#header-file">Header File</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#class-declaration">Class Declaration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#constructors">Constructors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#particlebuffer-size-t-initial-capacity-int-device-id-0">ParticleBuffer(size_t initial_capacity, int device_id = 0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#particlebuffer">~ParticleBuffer()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#member-functions">Member Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#memory-management">Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#allocate-size-t-capacity">allocate(size_t capacity)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#destroy">destroy()</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#resize-size-t-new-capacity">resize(size_t new_capacity)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#compact">compact()</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#particle-operations">Particle Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#add-particle-double-px-double-py-double-pvx-double-pvy-double-pweight-uint8-t-ptype">add_particle(double px, double py, double pvx, double pvy, double pweight, uint8_t ptype)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#remove-particle-size-t-idx">remove_particle(size_t idx)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#add-particles-batch">add_particles_batch(…)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#data-transfer">Data Transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#copy-to-device">copy_to_device(…)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#copy-to-host">copy_to_host(…)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#accessors">Accessors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#get-count">get_count()</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#get-capacity">get_capacity()</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#get-memory-bytes">get_memory_bytes()</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/particle_buffer.html#print-stats">print_stats()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#helper-functions">Helper Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#initialize-uniform">initialize_uniform(…)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#usage-examples">Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#example-1-basic-usage">Example 1: Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/particle_buffer.html#example-2-particle-migration">Example 2: Particle Migration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#performance-notes">Performance Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/particle_buffer.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/fields.html">API Reference: Field Arrays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/fields.html#quick-reference">Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/fields.html#key-features">Key Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/fields.html#data-members">Data Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/fields.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/boundaries.html">API Reference: Boundary Conditions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/boundaries.html#boundary-types">Boundary Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/boundaries.html#periodic-boundaries">Periodic Boundaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/boundaries.html#outflow-boundaries">Outflow Boundaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/boundaries.html#inflow-boundaries">Inflow Boundaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/boundaries.html#reflecting-boundaries">Reflecting Boundaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/boundaries.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/boundaries.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/mpi_manager.html">API Reference: MPI Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#quick-reference">Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#key-features">Key Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#data-members">Data Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#key-methods">Key Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/mpi_manager.html#domain-decomposition">Domain Decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/mpi_manager.html#communication">Communication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/mpi_manager.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="performance_tuning.html">Performance Tuning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#performance-overview">Performance Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#target-performance-metrics">Target Performance Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#typical-performance">Typical Performance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#configuration-tuning">Configuration Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#timestep-selection">Timestep Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#particles-per-cell">Particles Per Cell</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#grid-resolution">Grid Resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#output-cadence">Output Cadence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#cuda-optimization">CUDA Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#threads-per-block">Threads Per Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#memory-pool-size">Memory Pool Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#gpu-selection">GPU Selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#mpi-optimization">MPI Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#domain-decomposition">Domain Decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#cuda-aware-mpi">CUDA-Aware MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#overlap-communication">Overlap Communication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#profiling-and-analysis">Profiling and Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#using-nvidia-smi">Using nvidia-smi</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#using-nvprof">Using nvprof</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#using-nsight-systems">Using Nsight Systems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#memory-usage-optimization">Memory Usage Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#estimate-memory-requirements">Estimate Memory Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#reduce-memory-usage">Reduce Memory Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#common-performance-issues">Common Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#slow-particle-push">Slow Particle Push</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#slow-particle-to-grid">Slow Particle-to-Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#poor-mpi-scaling">Poor MPI Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance_tuning.html#high-memory-usage">High Memory Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#best-practices-summary">Best Practices Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#performance-checklist">Performance Checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-issues">Build Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvcc-not-found">“nvcc not found”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-capability-mismatch">“compute capability mismatch”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mpi-not-found">“MPI not found”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hdf5-not-found">“HDF5 not found”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-issues">Runtime Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cuda-out-of-memory">“CUDA out of memory”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-cuda-capable-device">“No CUDA-capable device”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mpi-init-failed">“MPI_Init failed”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#physics-issues">Physics Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#energy-not-conserved">Energy Not Conserved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-magnetic-reconnection">No Magnetic Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#particles-escaping-domain">Particles Escaping Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nan-values-appearing">NaN Values Appearing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simulation-too-slow">Simulation Too Slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#poor-mpi-scaling">Poor MPI Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpu-thermal-throttling">GPU Thermal Throttling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-issues">Output Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#permission-denied-writing-output">“Permission denied” Writing Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output-files-corrupted">Output Files Corrupted</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#diagnostic-collection">Diagnostic Collection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-reporting-issues">Before Reporting Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#self-help-resources">Self-Help Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#community-support">Community Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-checks">Quick Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-mistakes">Common Mistakes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation and Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="citation.html#how-to-cite">How to Cite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="citation.html#bibtex-entry">BibTeX Entry</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#published-papers">Published Papers</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#contributing">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="citation.html#types-of-contributions">Types of Contributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#code-style">Code Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#requesting-features">Requesting Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#code-of-conduct">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#credits">Credits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="citation.html#core-developers">Core Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#id1">Acknowledgments</a></li>
<li class="toctree-l3"><a class="reference internal" href="citation.html#third-party-libraries">Third-Party Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#contact">Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#funding">Funding</a></li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#publications-using-jericho-mk-ii">Publications Using Jericho Mk II</a></li>
<li class="toctree-l2"><a class="reference internal" href="citation.html#see-also">See Also</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Jericho Mk II</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/troubleshooting.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h1>
<p>This guide helps diagnose and resolve common issues with Jericho Mk II.</p>
<section id="build-issues">
<h2>Build Issues<a class="headerlink" href="#build-issues" title="Link to this heading"></a></h2>
<section id="nvcc-not-found">
<h3>“nvcc not found”<a class="headerlink" href="#nvcc-not-found" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CMake Error: Could not find CUDA compiler
</pre></div>
</div>
<p><strong>Cause:</strong> CUDA toolkit not installed or not in PATH</p>
<p><strong>Solution:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if nvcc exists</span>
which<span class="w"> </span>nvcc

<span class="c1"># If not found, add CUDA to PATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>

<span class="c1"># Add to ~/.bashrc to make permanent</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=/usr/local/cuda/bin:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</pre></div>
</div>
</section>
<section id="compute-capability-mismatch">
<h3>“compute capability mismatch”<a class="headerlink" href="#compute-capability-mismatch" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>nvcc fatal: Unsupported gpu architecture &#39;compute_XX&#39;
</pre></div>
</div>
<p><strong>Cause:</strong> Wrong GPU architecture specified in CMake</p>
<p><strong>Solution:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check your GPU&#39;s compute capability</span>
nvidia-smi<span class="w"> </span>--query-gpu<span class="o">=</span>compute_cap<span class="w"> </span>--format<span class="o">=</span>csv,noheader
<span class="c1"># Output: 8.6 (for example)</span>

<span class="c1"># Clean and reconfigure</span>
<span class="nb">cd</span><span class="w"> </span>build
rm<span class="w"> </span>-rf<span class="w"> </span>CMakeCache.txt<span class="w"> </span>CMakeFiles/
cmake<span class="w"> </span>-DCMAKE_CUDA_ARCHITECTURES<span class="o">=</span><span class="m">86</span><span class="w"> </span>..<span class="w">  </span><span class="c1"># Use 86 for compute 8.6</span>
make<span class="w"> </span>-j
</pre></div>
</div>
<p><strong>Common compute capabilities:</strong></p>
<ul class="simple">
<li><p>6.0: Pascal (P100)</p></li>
<li><p>7.0: Volta (V100)</p></li>
<li><p>7.5: Turing (RTX 2080)</p></li>
<li><p>8.0: Ampere (A100)</p></li>
<li><p>8.6: Ampere (RTX 3080, 3090)</p></li>
<li><p>9.0: Hopper (H100)</p></li>
</ul>
</section>
<section id="mpi-not-found">
<h3>“MPI not found”<a class="headerlink" href="#mpi-not-found" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Could NOT find MPI (missing: MPI_C_FOUND MPI_CXX_FOUND)
</pre></div>
</div>
<p><strong>Solution:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install MPI</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libopenmpi-dev<span class="w"> </span>openmpi-bin

<span class="c1"># Or for MPICH</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libmpich-dev<span class="w"> </span>mpich

<span class="c1"># Verify</span>
which<span class="w"> </span>mpicc
which<span class="w"> </span>mpicxx
</pre></div>
</div>
</section>
<section id="hdf5-not-found">
<h3>“HDF5 not found”<a class="headerlink" href="#hdf5-not-found" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Could NOT find HDF5
</pre></div>
</div>
<p><strong>Solution:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install HDF5</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libhdf5-dev

<span class="c1"># Or specify HDF5 location</span>
cmake<span class="w"> </span>-DHDF5_ROOT<span class="o">=</span>/path/to/hdf5<span class="w"> </span>..
</pre></div>
</div>
</section>
</section>
<section id="runtime-issues">
<h2>Runtime Issues<a class="headerlink" href="#runtime-issues" title="Link to this heading"></a></h2>
<section id="cuda-out-of-memory">
<h3>“CUDA out of memory”<a class="headerlink" href="#cuda-out-of-memory" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CUDA error: out of memory
cudaMalloc failed
</pre></div>
</div>
<p><strong>Cause:</strong> Simulation requires more GPU memory than available</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Reduce particle count:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[particles]</span>
<span class="n">particles_per_cell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="w">  </span><span class="c1"># Reduce from 100</span>
</pre></div>
</div>
</li>
<li><p><strong>Reduce grid size:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[domain]</span>
<span class="n">nx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="w">  </span><span class="c1"># Reduce from 256</span>
<span class="n">ny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span>
</pre></div>
</div>
</li>
<li><p><strong>Check available memory:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nvidia-smi
<span class="c1"># Look at &quot;Memory-Usage&quot; column</span>
</pre></div>
</div>
</li>
<li><p><strong>Close other GPU programs:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># List GPU processes</span>
nvidia-smi

<span class="c1"># Kill process using GPU</span>
<span class="nb">kill</span><span class="w"> </span>-9<span class="w"> </span>&lt;PID&gt;
</pre></div>
</div>
</li>
<li><p><strong>Use different GPU:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check which GPUs have free memory</span>
nvidia-smi

<span class="c1"># Use specific GPU</span>
<span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml
</pre></div>
</div>
</li>
</ol>
</section>
<section id="no-cuda-capable-device">
<h3>“No CUDA-capable device”<a class="headerlink" href="#no-cuda-capable-device" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cudaGetDeviceCount returned 0
no CUDA-capable device is detected
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Check if GPU exists:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lspci<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>nvidia
<span class="c1"># Should show NVIDIA GPU</span>
</pre></div>
</div>
</li>
<li><p><strong>Check driver:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nvidia-smi
<span class="c1"># Should show GPU info</span>

<span class="c1"># If fails, install driver</span>
sudo<span class="w"> </span>ubuntu-drivers<span class="w"> </span>autoinstall
sudo<span class="w"> </span>reboot
</pre></div>
</div>
</li>
<li><p><strong>Check CUDA installation:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nvcc<span class="w"> </span>--version
<span class="c1"># Should show CUDA version</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="mpi-init-failed">
<h3>“MPI_Init failed”<a class="headerlink" href="#mpi-init-failed" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>MPI_Init failed
</pre></div>
</div>
<p><strong>Causes and solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Wrong number of processes:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[mpi]</span>
<span class="n">npx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
<span class="n">npy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="c1"># Total = 4</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Must use 4 processes</span>
mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml<span class="w">  </span><span class="c1"># Correct</span>
mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">2</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml<span class="w">  </span><span class="c1"># Wrong!</span>
</pre></div>
</div>
</li>
<li><p><strong>Permission denied:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check executable permissions</span>
ls<span class="w"> </span>-l<span class="w"> </span>jericho_mkII
chmod<span class="w"> </span>+x<span class="w"> </span>jericho_mkII
</pre></div>
</div>
</li>
<li><p><strong>MPI not initialized:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test MPI installation</span>
mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">2</span><span class="w"> </span>hostname
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="physics-issues">
<h2>Physics Issues<a class="headerlink" href="#physics-issues" title="Link to this heading"></a></h2>
<section id="energy-not-conserved">
<h3>Energy Not Conserved<a class="headerlink" href="#energy-not-conserved" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>WARNING: Energy conservation error: 5.2%
</pre></div>
</div>
<p><strong>Causes and solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Timestep too large:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[simulation]</span>
<span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.005</span><span class="w">  </span><span class="c1"># Reduce from 0.01</span>
</pre></div>
</div>
<p><strong>Test:</strong> Halve dt and check if error reduces</p>
</li>
<li><p><strong>CAM disabled:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[physics]</span>
<span class="n">cam_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1"># Must be true!</span>
</pre></div>
</div>
</li>
<li><p><strong>Grid too coarse:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[domain]</span>
<span class="n">nx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="w">  </span><span class="c1"># Increase from 128</span>
<span class="n">ny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span>
</pre></div>
</div>
</li>
<li><p><strong>Check diagnostics:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="n">diag</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;output/diagnostics.csv&#39;</span><span class="p">)</span>

<span class="n">E0</span> <span class="o">=</span> <span class="n">diag</span><span class="p">[</span><span class="s1">&#39;total_energy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">rel_error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">diag</span><span class="p">[</span><span class="s1">&#39;total_energy&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">E0</span><span class="p">)</span> <span class="o">/</span> <span class="n">E0</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max energy error: </span><span class="si">{</span><span class="n">rel_error</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="no-magnetic-reconnection">
<h3>No Magnetic Reconnection<a class="headerlink" href="#no-magnetic-reconnection" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong> Harris sheet remains stable, no X-point forms</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Add perturbation:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[fields]</span>
<span class="n">init_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;harris_sheet&quot;</span>
<span class="n">B0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">20.0e-9</span>
<span class="n">L_sheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span>

<span class="c1"># Add small perturbation to trigger instability</span>
<span class="n">perturbation_amplitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.01</span><span class="w">  </span><span class="c1"># 1% perturbation</span>
</pre></div>
</div>
</li>
<li><p><strong>Enable Hall term:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[physics]</span>
<span class="n">ohms_law_hall</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1"># Essential for reconnection!</span>
</pre></div>
</div>
</li>
<li><p><strong>Check resistivity:</strong></p>
<p>Magnetic reconnection requires some resistivity. Check config or add:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[physics]</span>
<span class="n">resistivity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0e-7</span><span class="w">  </span><span class="c1"># Small but non-zero</span>
</pre></div>
</div>
</li>
<li><p><strong>Run longer:</strong></p>
<p>Reconnection can take time to develop. Run for &gt; 1000 steps.</p>
</li>
<li><p><strong>Check field strength:</strong></p>
<p>Too weak or too strong fields can suppress reconnection.</p>
</li>
</ol>
</section>
<section id="particles-escaping-domain">
<h3>Particles Escaping Domain<a class="headerlink" href="#particles-escaping-domain" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong> Particle count decreases rapidly</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Check boundary conditions:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[boundaries]</span>
<span class="n">x_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;periodic&quot;</span><span class="w">  </span><span class="c1"># Or &quot;reflecting&quot; to keep particles</span>
<span class="n">x_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;periodic&quot;</span>
<span class="n">y_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;periodic&quot;</span>
<span class="n">y_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;periodic&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Check timestep (CFL violation):</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[simulation]</span>
<span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.005</span><span class="w">  </span><span class="c1"># Reduce if particles move &gt; 1 cell per step</span>
</pre></div>
</div>
</li>
<li><p><strong>Check initial velocities:</strong></p>
<p>Velocities too high can cause particles to escape. Check:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[[particles.species]]</span>
<span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0e6</span><span class="w">  </span><span class="c1"># Not 1.0e10!</span>
<span class="n">drift_vx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w">       </span><span class="c1"># Not 1.0e8!</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="nan-values-appearing">
<h3>NaN Values Appearing<a class="headerlink" href="#nan-values-appearing" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>WARNING: NaN detected in field Ex at step 1234
</pre></div>
</div>
<p><strong>Causes and solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Divide by zero in density:</strong></p>
<p>Occurs when density → 0. Enable floor:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[physics]</span>
<span class="n">density_floor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0e3</span><span class="w">  </span><span class="c1"># Minimum density [m^-3]</span>
</pre></div>
</div>
</li>
<li><p><strong>Unstable timestep:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[simulation]</span>
<span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.001</span><span class="w">  </span><span class="c1"># Drastically reduce</span>
</pre></div>
</div>
</li>
<li><p><strong>Corrupted initial conditions:</strong></p>
<p>Check input files for NaN/Inf values</p>
</li>
<li><p><strong>Bug:</strong> Report to developers with:</p>
<ul class="simple">
<li><p>Configuration file</p></li>
<li><p>Last working step</p></li>
<li><p>Hardware info (GPU model, CUDA version)</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="performance-issues">
<h2>Performance Issues<a class="headerlink" href="#performance-issues" title="Link to this heading"></a></h2>
<section id="simulation-too-slow">
<h3>Simulation Too Slow<a class="headerlink" href="#simulation-too-slow" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>&lt; 0.1 Gparticles/s throughput</p></li>
<li><p>Hours for 1000 timesteps</p></li>
</ul>
<p><strong>Diagnostics:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check GPU utilization</span>
nvidia-smi<span class="w"> </span>dmon<span class="w"> </span>-s<span class="w"> </span>u
<span class="c1"># Should show &gt; 80% GPU utilization</span>
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Reduce output frequency:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[simulation]</span>
<span class="n">output_cadence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w">  </span><span class="c1"># Instead of 10</span>
</pre></div>
</div>
</li>
<li><p><strong>Disable particle output:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[output]</span>
<span class="n">particles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
</li>
<li><p><strong>Increase grid size or particle count:</strong></p>
<p>Small problems don’t fully utilize GPU:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[domain]</span>
<span class="n">nx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="w">  </span><span class="c1"># Up from 128</span>
<span class="n">ny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span>
</pre></div>
</div>
</li>
<li><p><strong>Check for CPU bottleneck:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Profile</span>
nvprof<span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml
<span class="c1"># Look for long CPU times between kernels</span>
</pre></div>
</div>
</li>
<li><p><strong>Use CUDA-aware MPI:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[cuda]</span>
<span class="n">use_cuda_aware_mpi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="poor-mpi-scaling">
<h3>Poor MPI Scaling<a class="headerlink" href="#poor-mpi-scaling" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong> 4 GPUs not 4x faster than 1 GPU</p>
<p><strong>Diagnostics:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time 1 GPU</span>
<span class="nb">time</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml

<span class="c1"># Time 4 GPUs</span>
<span class="nb">time</span><span class="w"> </span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml
<span class="c1"># Should be ~4x faster</span>
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Subdomains too small:</strong></p>
<p>Each rank needs ≥ 64×64 cells:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[domain]</span>
<span class="n">nx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="w">  </span><span class="c1"># At least 64 per rank</span>
<span class="n">ny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span>

<span class="k">[mpi]</span>
<span class="n">npx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
<span class="n">npy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
<span class="c1"># Each rank gets 128×256 ✓</span>
</pre></div>
</div>
</li>
<li><p><strong>Check MPI communication time:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use Nsight Systems</span>
nsys<span class="w"> </span>profile<span class="w"> </span>-o<span class="w"> </span>profile<span class="w"> </span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>./jericho_mkII<span class="w"> </span>config.toml
nsys-ui<span class="w"> </span>profile.qdrep
<span class="c1"># Look for MPI overhead</span>
</pre></div>
</div>
</li>
<li><p><strong>Enable CUDA-aware MPI:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if available</span>
ompi_info<span class="w"> </span>--parsable<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cuda_support

<span class="c1"># Enable</span>
<span class="o">[</span>cuda<span class="o">]</span>
<span class="nv">use_cuda_aware_mpi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="gpu-thermal-throttling">
<h3>GPU Thermal Throttling<a class="headerlink" href="#gpu-thermal-throttling" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong> Simulation starts fast, then slows down</p>
<p><strong>Diagnosis:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Monitor temperature</span>
watch<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Improve cooling:</strong></p>
<ul class="simple">
<li><p>Clean dust from fans</p></li>
<li><p>Improve case airflow</p></li>
<li><p>Lower ambient temperature</p></li>
</ul>
</li>
<li><p><strong>Reduce power limit (if overheating):</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reduce to 80% power</span>
sudo<span class="w"> </span>nvidia-smi<span class="w"> </span>-pl<span class="w"> </span><span class="m">200</span><span class="w">  </span><span class="c1"># For 250W GPU</span>
</pre></div>
</div>
</li>
<li><p><strong>Check thermal paste</strong> (for older GPUs)</p></li>
</ol>
</section>
</section>
<section id="output-issues">
<h2>Output Issues<a class="headerlink" href="#output-issues" title="Link to this heading"></a></h2>
<section id="permission-denied-writing-output">
<h3>“Permission denied” Writing Output<a class="headerlink" href="#permission-denied-writing-output" title="Link to this heading"></a></h3>
<p><strong>Error:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Error: Cannot create output directory
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check permissions</span>
ls<span class="w"> </span>-ld<span class="w"> </span>output/

<span class="c1"># Create directory with correct permissions</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>output
chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>output

<span class="c1"># Or specify writable location</span>
<span class="o">[</span>simulation<span class="o">]</span>
<span class="nv">output_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/tmp/jericho_output&quot;</span>
</pre></div>
</div>
</section>
<section id="output-files-corrupted">
<h3>Output Files Corrupted<a class="headerlink" href="#output-files-corrupted" title="Link to this heading"></a></h3>
<p><strong>Symptom:</strong> Cannot open HDF5 files</p>
<p><strong>Diagnosis:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check file integrity</span>
h5dump<span class="w"> </span>-H<span class="w"> </span>output/fields_001000.h5
<span class="c1"># Should show structure, not error</span>
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p><strong>Check disk space:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>df<span class="w"> </span>-h
<span class="c1"># Ensure sufficient space</span>
</pre></div>
</div>
</li>
<li><p><strong>Check for crashes during write:</strong></p>
<p>Enable more frequent checkpointing:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[simulation]</span>
<span class="n">checkpoint_cadence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w">  </span><span class="c1"># More frequent</span>
</pre></div>
</div>
</li>
<li><p><strong>Use checkpoint to recover:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find last good checkpoint</span>
ls<span class="w"> </span>-lrt<span class="w"> </span>checkpoints/

<span class="c1"># Restart from it</span>
./jericho_mkII<span class="w"> </span>--restart<span class="w"> </span>checkpoints/checkpoint_000900.h5<span class="w"> </span>config.toml
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="diagnostic-collection">
<h2>Diagnostic Collection<a class="headerlink" href="#diagnostic-collection" title="Link to this heading"></a></h2>
<section id="before-reporting-issues">
<h3>Before Reporting Issues<a class="headerlink" href="#before-reporting-issues" title="Link to this heading"></a></h3>
<p>Collect this information:</p>
<ol class="arabic">
<li><p><strong>System info:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># GPU info</span>
nvidia-smi
nvidia-smi<span class="w"> </span>--query-gpu<span class="o">=</span>name,memory.total,compute_cap<span class="w"> </span>--format<span class="o">=</span>csv

<span class="c1"># CUDA version</span>
nvcc<span class="w"> </span>--version

<span class="c1"># OS info</span>
uname<span class="w"> </span>-a
lsb_release<span class="w"> </span>-a
</pre></div>
</div>
</li>
<li><p><strong>Build info:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># CMake configuration</span>
cat<span class="w"> </span>build/CMakeCache.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;(CUDA|MPI|HDF5)&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Configuration file:</strong></p>
<p>Include your <code class="docutils literal notranslate"><span class="pre">config.toml</span></code></p>
</li>
<li><p><strong>Error messages:</strong></p>
<p>Save complete error output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./jericho_mkII<span class="w"> </span>config.toml<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>error.log
</pre></div>
</div>
</li>
<li><p><strong>Last working state:</strong></p>
<ul class="simple">
<li><p>Last successful timestep</p></li>
<li><p>Particle count evolution</p></li>
<li><p>Energy conservation up to failure</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="getting-help">
<h2>Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading"></a></h2>
<section id="self-help-resources">
<h3>Self-Help Resources<a class="headerlink" href="#self-help-resources" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Documentation:</strong> <a class="reference external" href="https://st7ma784.github.io/jericho_mkII/">https://st7ma784.github.io/jericho_mkII/</a></p></li>
<li><p><strong>Example configs:</strong> <code class="docutils literal notranslate"><span class="pre">examples/</span></code> directory</p></li>
<li><p><strong>Test cases:</strong> <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory</p></li>
</ol>
</section>
<section id="reporting-bugs">
<h3>Reporting Bugs<a class="headerlink" href="#reporting-bugs" title="Link to this heading"></a></h3>
<p>Create GitHub issue with:</p>
<ol class="arabic simple">
<li><p><strong>Title:</strong> Brief description</p></li>
<li><p><strong>Environment:</strong></p>
<ul class="simple">
<li><p>GPU model and compute capability</p></li>
<li><p>CUDA version</p></li>
<li><p>OS and version</p></li>
<li><p>MPI implementation</p></li>
</ul>
</li>
<li><p><strong>To Reproduce:</strong></p>
<ul class="simple">
<li><p>Configuration file</p></li>
<li><p>Command line used</p></li>
<li><p>Steps to reproduce</p></li>
</ul>
</li>
<li><p><strong>Expected behavior:</strong> What should happen</p></li>
<li><p><strong>Actual behavior:</strong> What actually happens</p></li>
<li><p><strong>Logs:</strong></p>
<ul class="simple">
<li><p>Error messages</p></li>
<li><p>Last 50 lines of output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">diagnostics.csv</span></code> if available</p></li>
</ul>
</li>
<li><p><strong>Additional context:</strong></p>
<ul class="simple">
<li><p>Did it work before?</p></li>
<li><p>Changed anything recently?</p></li>
</ul>
</li>
</ol>
<p>Example bug report:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gs">**Title:**</span> CUDA out of memory with 256x256 grid on RTX 3080

<span class="gs">**Environment:**</span>
<span class="k">-</span><span class="w"> </span>GPU: NVIDIA GeForce RTX 3080 (10 GB, compute 8.6)
<span class="k">-</span><span class="w"> </span>CUDA: 11.8
<span class="k">-</span><span class="w"> </span>OS: Ubuntu 22.04
<span class="k">-</span><span class="w"> </span>MPI: OpenMPI 4.1.2

<span class="gs">**To Reproduce:**</span>
<span class="k">1.</span> Use attached config.toml (256x256 grid, 100 ppc, 2 species)
<span class="k">2.</span> Run: <span class="sb">`./jericho_mkII config.toml`</span>
<span class="k">3.</span> Crashes at step 0 with &quot;cudaMalloc failed&quot;

<span class="gs">**Expected:**</span> Should run (only ~400 MB needed)

<span class="gs">**Actual:**</span> Crashes immediately with OOM error

<span class="gs">**Logs:**</span>
<span class="sb">```</span>
<span class="sb">[attach error.log]</span>
<span class="sb">```</span>
</pre></div>
</div>
</section>
<section id="community-support">
<h3>Community Support<a class="headerlink" href="#community-support" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GitHub Issues:</strong> <a class="reference external" href="https://github.com/st7ma784/jericho_mkII/issues">https://github.com/st7ma784/jericho_mkII/issues</a></p></li>
<li><p><strong>Email:</strong> <a class="reference external" href="mailto:j&#46;wiggs&#37;&#52;&#48;lancaster&#46;ac&#46;uk">j<span>&#46;</span>wiggs<span>&#64;</span>lancaster<span>&#46;</span>ac<span>&#46;</span>uk</a></p></li>
<li><p><strong>Documentation:</strong> Read the docs first!</p></li>
</ul>
</section>
</section>
<section id="quick-checks">
<h2>Quick Checks<a class="headerlink" href="#quick-checks" title="Link to this heading"></a></h2>
<p>Before asking for help, try these:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Does the example config work?</span>
./jericho_mkII<span class="w"> </span>examples/minimal_test.toml

<span class="c1"># 2. Is your config valid?</span>
./jericho_mkII<span class="w"> </span>--dry-run<span class="w"> </span>config.toml

<span class="c1"># 3. Is GPU working?</span>
nvidia-smi

<span class="c1"># 4. Is MPI working?</span>
mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">2</span><span class="w"> </span>hostname

<span class="c1"># 5. Is build correct?</span>
ldd<span class="w"> </span>jericho_mkII<span class="w">  </span><span class="c1"># Check linked libraries</span>

<span class="c1"># 6. Clean and rebuild?</span>
rm<span class="w"> </span>-rf<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j
</pre></div>
</div>
</section>
<section id="common-mistakes">
<h2>Common Mistakes<a class="headerlink" href="#common-mistakes" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Forgetting to set npx × npy = total MPI ranks</strong></p></li>
<li><p><strong>Timestep too large (energy not conserved)</strong></p></li>
<li><p><strong>Output directory doesn’t exist</strong></p></li>
<li><p><strong>Wrong GPU architecture in CMake</strong></p></li>
<li><p><strong>CUDA-aware MPI enabled but not available</strong></p></li>
<li><p><strong>Running on wrong GPU</strong> (use CUDA_VISIBLE_DEVICES)</p></li>
<li><p><strong>Periodic boundaries when open needed</strong> (or vice versa)</p></li>
<li><p><strong>Forgetting to enable Hall term</strong> (for reconnection)</p></li>
<li><p><strong>Too few particles per cell</strong> (noisy statistics)</p></li>
<li><p><strong>Writing output too frequently</strong> (I/O bottleneck)</p></li>
</ol>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="getting_started.html"><span class="doc">Getting Started</span></a> - Installation guide</p></li>
<li><p><a class="reference internal" href="running_simulations.html"><span class="doc">Running Simulations</span></a> - Usage guide</p></li>
<li><p><a class="reference internal" href="performance_tuning.html"><span class="doc">Performance Tuning</span></a> - Optimization tips</p></li>
<li><p>GitHub Issues - Community Q&amp;A</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="performance_tuning.html" class="btn btn-neutral float-left" title="Performance Tuning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="citation.html" class="btn btn-neutral float-right" title="Citation and Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Lancaster University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>